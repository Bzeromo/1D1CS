# ✅ Daily CS : 캐시(Cache)

>❓ 질문
>캐시(Cache)의 정의와 역할은 무엇이며, 왜 필요한가?
>그리고 캐시의 지역성(Locality) 개념과 캐시 무효화(Cache Invalidation) 전략이란?

***

## 📌 정의

🔷 **접근 속도가 빠른 저장소에 데이터를 임시로 저장해, 재사용 시 성능을 높이는 기술**

- 느린 저장소(I/O, 메모리, 디스크, 네트워크 등) 대신 빠른 위치에서 데이터를 제공


- 자주 쓰는 데이터를 가까이 두어 속도 향상과 응답 지연 최소화를 달성

***

## 📌 지역성의 원리 (Principle of Locality)

🔷 **캐시가 효과적으로 동작하기 위한 이론적 기반**

⌛ 시간 지역성(`Temporal Locality`)

- 최근에 접근한 데이터는 다시 접근될 가능성이 높다.

- _예: 배열의 인덱스를 반복적으로 읽을 때_

🌍 공간 지역성(`Spatial Locality`)

-  인접한 데이터에 접근할 가능성이 높다.

- _예: 배열을 순차적으로 탐색할 때_

***

## 📌 사용 예시

| 분야  | 캐시 활용                      |
| --- | -------------------------- |
| CPU | L1/L2/L3 캐시로 메모리 접근 속도 향상  |
| OS  | 페이지 캐시로 디스크 접근 최소화         |
| 웹   | 브라우저/프록시 캐시로 리소스 재사용       |
| DB  | 쿼리 결과/인덱스 캐시               |
| 백엔드 | Redis, Memcached 등 인메모리 캐시 |

***

## ⚙️ 캐시 무효화 전략 (Cache Invalidation)

- 캐시는 최신 상태와 일치하지 않는 경우(`stale`) 가 발생할 수 있음

### 이를 해결하기 위한 대표 전략

| 전략                            | 설명                           |
| ----------------------------- | ---------------------------- |
| **Write-through**             | 데이터를 캐시와 원본 모두에 동시에 기록       |
| **Write-back**                | 캐시에만 먼저 기록하고, 일정 조건에서 원본에 반영 |
| **Time-to-Live (TTL)**        | 일정 시간 이후 캐시 자동 만료            |
| **Manual Invalidate**         | 데이터 변경 시 개발자가 명시적으로 캐시 삭제    |
| **LRU (Least Recently Used)** | 가장 오래된 캐시부터 제거 (공간 부족 시 사용됨) |

***

### ✅ 장점

- 응답 시간 단축


- 네트워크/디스크 부하 감소


- 시스템 전체 처리량 향상

***

### ❌ 단점

- 데이터 최신성 유지가 어려움


- 복잡한 무효화 로직 필요


- 캐시 히트율 낮을 경우 오히려 오버헤드 발생

***

## 📕 용어 정리

| 키워드          | 내용              |
| ------------ | --------------- |
| Cache Hit    | 요청 데이터가 캐시에 존재  |
| Cache Miss   | 캐시에 없어 원본에서 불러옴 |
| Locality     | 시간/공간 지역성       |
| TTL          | 캐시 유효 기간        |
| Invalidation | 캐시 무효화 방식       |

📌 캐시 일관성(Cache Consistency)
: 원본 데이터와 캐시에 저장된 데이터가 동일한 상태를 유지하도록 보장하는 개념.

 - 캐시는 성능을 위해 원본과 복사본을 둠 → 하지만 변경이 생기면 불일치 발생 가능

 - 이 불일치를 방지하거나 최소화하는 방법을 캐시 일관성 유지 전략이라고 함
 - 
   | 전략                      | 설명                                     |
   | ----------------------- | -------------------------------------- |
   | **Write-through**       | 캐시에 쓰면 바로 원본에도 반영됨 → 일관성 높음, 성능 낮음     |
   | **Write-back**          | 캐시에만 먼저 쓰고, 나중에 원본에 반영 → 성능 높음, 일관성 낮음 |
   | **Write-around**        | 캐시는 건너뛰고 원본에만 쓰고, 읽을 때 캐시로 다시 불러옴      |
   | **Invalidate on write** | 원본 수정 시 해당 캐시를 무효화하여 재요청 시 최신 데이터 확보   |

>⚠️ **유의점**
>
>일관성 보장 vs 성능은 항상 트레이드오프,
> 
>특히 분산 시스템이나 CDN 환경에서 강력한 일관성 보장은 어렵고 비효율적일 수 있음

📌 CDN (Content Delivery Network)
: 전 세계 여러 지역에 분산된 캐시 서버를 통해 콘텐츠를 빠르게 전달하는 네트워크 인프라.

- 정적 자원(JS, CSS, 이미지, 영상 등)을 가장 가까운 엣지 서버에서 제공

- 사용자의 요청을 중앙 서버까지 전달하지 않고 빠르게 응답 가능